---

title: "/home/anarendran/Documents/temp/rivet/analyses/pluginATLAS/ATLAS_2015_I1386475.cc"

---

# /home/anarendran/Documents/temp/rivet/analyses/pluginATLAS/ATLAS_2015_I1386475.cc



## Namespaces

| Name           |
| -------------- |
| **[Rivet](http://example.org/namespaces/namespacerivet/)** <br>-*- C++ -*-  |

## Classes

|                | Name           |
| -------------- | -------------- |
| class | **[Rivet::ATLAS_2015_I1386475](http://example.org/classes/classrivet_1_1atlas__2015__i1386475/)** <br>Add a short analysis description here.  |




## Source code

```cpp
// -*- C++ -*-
#include "Rivet/Analysis.hh"
#include "Rivet/Tools/AtlasCommon.hh"

namespace Rivet {


  class ATLAS_2015_I1386475 : public Analysis {
  public:

    RIVET_DEFAULT_ANALYSIS_CTOR(ATLAS_2015_I1386475);
  void init() {

    // The centrality projection.
    declareCentrality(ATLAS::SumET_PB_Centrality(),
                      "ATLAS_pPb_Calib", "SumETPb", "CENT");

    // The trigger projection.
    declare(ATLAS::MinBiasTrigger(), "Trigger");

    // The particles to be analysed.
    declare(ChargedFinalState(Cuts::eta > -2.7 && Cuts::eta < 2.7 &&
                              Cuts::pT > 0.1*GeV), "CFS");
    
    // The centrality bins' upper edges.
    centralityBins = {90., 60., 40., 30., 20., 10., 5., 1.};
    for (int i = 0; i < 8; ++i) {
      book(histEta[centralityBins[i]], 2, 1, i + 1);
      book(sow[centralityBins[i]], "_sow"+to_string(i) + "Counter");
    }
  }

  void analyze(const Event& event) {
    
    // Apply event triggers.
    if ( !apply<ATLAS::MinBiasTrigger>(event, "Trigger")() ) vetoEvent;

    // We must have direct acces to the centrality projection.
    const CentralityProjection& cent = 
      apply<CentralityProjection>(event,"CENT");
    double c = cent();
    // Find the correct centrality histogram
    auto hItr = histEta.upper_bound(c);
    if (hItr == histEta.end()) return;
    // Find the correct sow.
    auto sItr = sow.upper_bound(c);
    if (sItr == sow.end()) return;
    sItr->second->fill();
    for ( const auto &p : apply<ChargedFinalState>(event,"CFS").particles() )
      hItr->second->fill(p.eta());
  }
    
  void finalize() {

    // Scale by the inverse sum of event weights in each centrality
    // bin.
    for (int i = 0; i < 8; ++i)
      histEta[centralityBins[i]]->scaleW(1./sow[centralityBins[i]]->sumW());

  }

private:

  vector<double> centralityBins;
  map<double,Histo1DPtr> histEta;
  map<double, CounterPtr> sow;





  };


  // The hook for the plugin system
  RIVET_DECLARE_PLUGIN(ATLAS_2015_I1386475);


}
```


-------------------------------

Updated on 2022-07-27 at 19:10:14 +0100

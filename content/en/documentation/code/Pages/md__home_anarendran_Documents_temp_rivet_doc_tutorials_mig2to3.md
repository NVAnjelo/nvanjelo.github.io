---

title: "Migration from Rivet v2 to Rivet v3"

---

# Migration from Rivet v2 to Rivet v3



<a href="http://example.org/namespaces/namespacerivet/">Rivet</a> 3.x is a major new release series, in which we've made some big changes that affect the programming interface (or "API") exposed to analysis authors. Fear not: the changes are simple, and all beneficial to routine writers... it's just the need for transition that's a bit unfortunate. Here is a _very_ quick guide for updating your analysis code from v2 to v3:



* The <code>addProjection(...)</code> function no longer exists: replace uses of this with <code>declare(...)</code>.
* Similarly, <code>applyProjection()</code> should now be <code>apply()</code>. Fewer characters to type: yay!
* There is also a change in the histogram-booking syntax from e.g. <code>&#95;h&#95;xxx = bookHisto1D(...)</code> to <code>book(&#95;h&#95;xxx, ...)</code>
* You should no longer attempt to access "the" event weight, since that's now done automatically and for all weights in the systematics vector: <code>&#95;h&#95;xxx-&gt;fill(x, event.weight())</code> becomes <code>&#95;h&#95;xxx-&gt;fill(x)</code>.
We recommend that anyone writing a new analysis should start by running the <code>rivet-mkanalysis</code> script rather than directly copying an old analysis code: we update the templates generated by the script as new API features and ideas occur, and it always represents best-practice. You can still copy-paste chunks from your old analysis as you need them, modulo the unavoidable API changes above. 

-------------------------------

Updated on 2022-07-27 at 19:10:17 +0100
